(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37f304c0"],{"471b":function(e,r,t){},"6d0b":function(e,r,t){"use strict";t.d(r,"a",(function(){return o})),t.d(r,"c",(function(){return n})),t.d(r,"d",(function(){return s})),t.d(r,"b",(function(){return a}));var i=t("b775");function o(e){return Object(i["a"])({url:"api/purchase",method:"post",data:e})}function n(){return Object(i["a"])({url:"api/purchase/download",method:"get",responseType:"blob"})}function s(e){return Object(i["a"])({url:"api/purchase/"+e.id,method:"put",data:e})}function a(e){return Object(i["a"])({url:"api/purchase/"+e,method:"delete"})}},c6da:function(e,r,t){"use strict";var i=t("471b"),o=t.n(i);o.a},c7d6:function(e,r,t){"use strict";t.r(r);var i=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"before-close":e.cancel,visible:e.dialog,title:e.isAdd?"新增采购记录":"编辑采购记录",width:"500px"},on:{"update:visible":function(r){e.dialog=r}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"small","label-width":"105px"}},[t("el-form-item",{attrs:{label:"药品编号",prop:"medicine.id"}},[t("el-input",{model:{value:e.form.medicine.id,callback:function(r){e.$set(e.form.medicine,"id","string"===typeof r?r.trim():r)},expression:"form.medicine.id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"供应商编号",prop:"supplier.id"}},[t("el-input",{model:{value:e.form.supplier.id,callback:function(r){e.$set(e.form.supplier,"id","string"===typeof r?r.trim():r)},expression:"form.supplier.id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"采购人员编号",prop:"user.id"}},[t("el-input",{model:{value:e.form.user.id,callback:function(r){e.$set(e.form.user,"id","string"===typeof r?r.trim():r)},expression:"form.user.id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"数目",prop:"purchaseCount"}},[t("el-input-number",{attrs:{disabled:!e.isAdd,min:1,"controls-position":"right"},model:{value:e.form.purchaseCount,callback:function(r){e.$set(e.form,"purchaseCount",e._n(r))},expression:"form.purchaseCount"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"采购单价",prop:"purchasePrice"}},[t("el-input",{attrs:{disabled:!e.isAdd},model:{value:e.form.purchasePrice,callback:function(r){e.$set(e.form,"purchasePrice",r)},expression:"form.purchasePrice"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"采购日期",prop:"purchaseTime"}},[t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:SS",editable:!1,disabled:!e.isAdd,placeholder:"选择采购日期"},model:{value:e.form.purchaseTime,callback:function(r){e.$set(e.form,"purchaseTime",r)},expression:"form.purchaseTime"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"text"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.doSubmit}},[e._v("确认")])],1)],1)},o=[],n=t("6d0b"),s=t("ca17"),a=t.n(s),u=(t("542c"),{components:{Treeselect:a.a},props:{isAdd:{type:Boolean,required:!0}},data:function(){var e=function(e,r,t){var i=/^\d{1,5}(?:\.\d{1,2})?$/;return i.test(r)?t():t(new Error("请输入正确金额,整数位不超过五位,小数点后最多只能输入两位"))};return{loading:!1,dialog:!1,form:{id:"",medicine:{id:"",name:""},supplier:{id:"",name:""},user:{id:"",name:""},purchaseCount:null,purchasePrice:"",purchaseTime:null},rules:{"medicine.id":[{required:!0,message:"必须输入药品编号",trigger:"blur"}],"supplier.id":[{required:!0,message:"必须输入供应商编号",trigger:"blur"}],"user.id":[{required:!0,message:"必须输入销售人员编号",trigger:"blur"}],purchaseCount:[{required:!0,message:"必须输入采购数目",trigger:"blur"}],purchasePrice:[{required:!0,message:"必须输入采购单价",trigger:"blur"},{required:!0,trigger:"blur",validator:e}],purchaseTime:[{required:!0,message:"必须选取采购时间",trigger:"blur"}]}}},methods:{cancel:function(){this.resetForm()},doSubmit:function(){var e=this;this.$refs["form"].validate((function(r){if(!r)return!1;e.isAdd?e.doAdd():e.doEdit()}))},doAdd:function(){var e=this;Object(n["a"])(this.form).then((function(r){e.resetForm(),e.$notify({title:"添加成功",type:"success",duration:2500}),e.loading=!1,e.$parent.init()})).catch((function(r){e.loading=!1,console.log(r.response.data.message)}))},doEdit:function(){var e=this;Object(n["d"])(this.form).then((function(r){e.resetForm(),e.$notify({title:"修改成功",type:"success",duration:2500}),e.loading=!1,e.$parent.init()})).catch((function(r){e.loading=!1,console.log(r.response.data.message)}))},resetForm:function(){this.dialog=!1,this.$refs["form"].resetFields(),this.form={id:"",medicine:{id:"",name:""},supplier:{id:"",name:""},user:{id:"",name:""},purchaseCount:null,purchasePrice:"",purchaseTime:null}}}}),l=u,d=(t("c6da"),t("2877")),c=Object(d["a"])(l,i,o,!1,null,"6e64ef85",null);r["default"]=c.exports}}]);