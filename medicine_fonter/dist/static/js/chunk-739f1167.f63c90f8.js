(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-739f1167"],{9386:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"before-close":e.cancel,visible:e.dialog,title:e.isAdd?"新增顾客":"编辑顾客",width:"500px"},on:{"update:visible":function(t){e.dialog=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"small","label-width":"75px"}},[e.isAdd?e._e():r("el-form-item",{attrs:{label:"顾客编号",prop:"id"}},[r("el-input",{attrs:{disabled:""},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",e._n(t))},expression:"form.id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"性别",prop:"sex"}},e._l(e.sexOptions,(function(t){return r("el-radio",{key:t.id,attrs:{label:t.key},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v(e._s(t.display_name))])})),1),e._v(" "),r("el-form-item",{attrs:{label:"年龄",prop:"age"}},[r("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",e._n(t))},expression:"form.age"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电话",prop:"phone"}},[r("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",e._n(t))},expression:"form.phone"}})],1),e._v(" "),r("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"地址"}},[r("el-input",{attrs:{type:"textarea",rows:2,maxlength:"90","show-word-limit":"",placeholder:"具体地址",clearable:""},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address","string"===typeof t?t.trim():t)},expression:"form.address"}})],1),e._v(" "),r("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"症状"}},[r("el-input",{attrs:{type:"textarea",rows:2,maxlength:"90","show-word-limit":"",placeholder:"详细症状",clearable:""},model:{value:e.form.symptom,callback:function(t){e.$set(e.form,"symptom","string"===typeof t?t.trim():t)},expression:"form.symptom"}})],1),e._v(" "),r("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"备注"}},[r("el-input",{attrs:{type:"textarea",rows:2,maxlength:"90","show-word-limit":"",placeholder:"备注信息",clearable:""},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark","string"===typeof t?t.trim():t)},expression:"form.remark"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"text"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.doSubmit}},[e._v("确认")])],1)],1)},n=[],a=r("f6b0"),i=r("ca17"),s=r.n(i),l=(r("542c"),{components:{Treeselect:s.a},props:{isAdd:{type:Boolean,required:!0}},data:function(){var e=this,t=function(t,r,o){r?e.isValidPhone(r)?o():o(new Error("请输入正确的11位手机号码")):o(new Error("请输入电话号码"))};return{loading:!1,dialog:!1,form:{id:"",name:"",sex:"0",age:null,phone:null,address:"",symptom:"",remark:""},sexOptions:[{key:"0",display_name:"男"},{key:"1",display_name:"女"}],rules:{name:[{required:!0,message:"必须输入姓名",trigger:"blur"}],phone:[{required:!0,message:"必须输入组成成份",trigger:"blur"},{required:!0,trigger:"blur",validator:t}],age:[{required:!0,message:"必须输入年龄",trigger:"blur"}],symptom:[{required:!0,message:"必须输入症状",trigger:"blur"}]}}},methods:{cancel:function(){this.resetForm()},doSubmit:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return!1;e.isAdd?e.doAdd():e.doEdit()}))},doAdd:function(){var e=this;Object(a["a"])(this.form).then((function(t){e.resetForm(),e.$notify({title:"添加成功",type:"success",duration:2500}),e.loading=!1,e.$parent.init()})).catch((function(t){e.loading=!1,console.log(t.response.data.message)}))},doEdit:function(){var e=this;Object(a["d"])(this.form).then((function(t){e.resetForm(),e.$notify({title:"修改成功",type:"success",duration:2500}),e.loading=!1,e.$parent.init()})).catch((function(t){e.loading=!1,console.log(t.response.data.message)}))},resetForm:function(){this.dialog=!1,this.$refs["form"].resetFields(),this.form={id:"",name:"",sex:"0",age:null,phone:null,address:"",symptom:"",remark:""}},isValidPhone:function(e){var t=/^1[3|4|5|7|8][0-9]\d{8}$/;return t.test(e)}}}),m=l,d=(r("d4d2"),r("2877")),c=Object(d["a"])(m,o,n,!1,null,"59a5b97b",null);t["default"]=c.exports},cf2d:function(e,t,r){},d4d2:function(e,t,r){"use strict";var o=r("cf2d"),n=r.n(o);n.a},f6b0:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return i})),r.d(t,"b",(function(){return s}));var o=r("b775");function n(e){return Object(o["a"])({url:"api/customer",method:"post",data:e})}function a(){return Object(o["a"])({url:"api/customer/download",method:"get",responseType:"blob"})}function i(e){return console.log(e),Object(o["a"])({url:"api/customer/"+e.id,method:"put",data:e})}function s(e){return Object(o["a"])({url:"api/customer/"+e,method:"delete"})}}}]);