(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1362b544"],{"5cf1":function(e,t,r){},"7b0a":function(e,t,r){"use strict";function n(e,t,r){""==t||void 0==t||null==t?r():t.length<5||t.length>32?r(new Error("请输入正确的账号格式")):r()}function i(e,t,r){var n=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/;""==t||void 0==t||null==t?r():n.test(t)?r():r(new Error("密码由在8到16位数字和字母组成"))}r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return i}))},dd7b:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"label-position":"left","label-width":"0px"}},[r("h3",{staticClass:"title"},[e._v("医药管理系统")]),e._v(" "),r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}},[r("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"user-login"},slot:"prefix"})],1)],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[r("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"password"},slot:"prefix"})],1)],1),e._v(" "),r("el-form-item",{attrs:{prop:"captcha"}},[r("el-input",{staticStyle:{width:"63%"},attrs:{"auto-complete":"off",placeholder:"验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.captcha,callback:function(t){e.$set(e.loginForm,"captcha",t)},expression:"loginForm.captcha"}},[r("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"captcha"},slot:"prefix"})],1),e._v(" "),r("div",{staticClass:"login-code"},[r("img",{attrs:{src:e.captchaUrl},on:{click:e.getCaptcha}})])],1),e._v(" "),r("el-checkbox",{staticStyle:{margin:"0px 0px 25px 0px"},model:{value:e.loginForm.rememberMe,callback:function(t){e.$set(e.loginForm,"rememberMe",t)},expression:"loginForm.rememberMe"}},[e._v("记住我")]),e._v(" "),r("el-form-item",{staticStyle:{width:"100%"}},[r("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,size:"medium",type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e.loading?r("span",[e._v("正在登录...")]):r("span",[e._v("登 录")])])],1)],1)],1)},i=[],o=(r("28a5"),r("7ded")),a=r("7b0a"),s=r("83d6"),l=r.n(s),c=r("d702"),u=r("a78e"),p=r.n(u),d={name:"Login",data:function(){return{captchaUrl:"",loginForm:{username:"",password:"",captcha:"",rememberMe:!1,uuid:""},loginRules:{username:[{required:!0,trigger:"blur",message:"用户名不能为空"},{validator:a["b"],trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"密码不能为空"},{validator:a["a"],trigger:"blur"}],captcha:[{required:!0,trigger:"change",message:"验证码不能为空"}]},loading:!1,redirect:void 0}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},created:function(){this.getCookie(),this.getCaptcha()},methods:{getCaptcha:function(){var e=this;Object(o["a"])().then((function(t){e.loginForm.uuid=t.uuid,e.captchaUrl="data:image/gif;base64,"+t.img}))},getCookie:function(){var e=p.a.get("SYSTEM_USER");void 0!==e&&(e=c["a"].decrypt(e).split("&"),this.loginForm={username:e[0],password:e[1],captcha:""})},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){var r={username:e.loginForm.username,password:e.loginForm.password,uuid:e.loginForm.uuid,captcha:e.loginForm.captcha,rememberMe:e.loginForm.rememberMe};if(!t)return!1;e.loading=!0,r.rememberMe?p.a.set("SYSTEM_USER",c["a"].encrypt(r.username+"&"+r.password),{expires:l.a.passCookieExpires}):p.a.remove("SYSTEM_USER"),e.$store.dispatch("login",r).then((function(){e.loading=!1,e.$router.push({path:e.redirect||"/"})})).catch((function(){e.loading=!1,e.getCaptcha()}))}))}}},m=d,g=(r("eecc"),r("2877")),f=Object(g["a"])(m,n,i,!1,null,null,null);t["default"]=f.exports},eecc:function(e,t,r){"use strict";var n=r("5cf1"),i=r.n(n);i.a}}]);