(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-593d3a89","chunk-77103fd8"],{"1de3":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"before-close":t.cancel,visible:t.dialog,title:t.isAdd?"新增岗位":"编辑岗位",width:"500px"},on:{"update:visible":function(e){t.dialog=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,size:"small","label-width":"80px"}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{staticStyle:{width:"370px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"===typeof e?e.trim():e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"排序",prop:"sort"}},[n("el-input-number",{staticStyle:{width:"370px"},attrs:{min:0,max:999,"controls-position":"right"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",t._n(e))},expression:"form.sort"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"所属部门"}},[n("treeselect",{staticStyle:{width:"370px"},attrs:{options:t.depts,placeholder:"选择部门"},model:{value:t.deptId,callback:function(e){t.deptId=e},expression:"deptId"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.doSubmit}},[t._v("确认")])],1)],1)},r=[],a=n("fe05"),o=n("76fe"),s=n("ca17"),l=n.n(s),c=(n("542c"),{components:{Treeselect:l.a},props:{isAdd:{type:Boolean,required:!0}},data:function(){return{loading:!1,dialog:!1,depts:[],deptId:null,form:{id:"",name:"",sort:999,createTime:"",dId:"",dept:{id:""}},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],sort:[{required:!0,message:"请输入序号",trigger:"blur",type:"number"}]}}},methods:{cancel:function(){this.resetForm()},doSubmit:function(){var t=this;this.form.dept.id=this.deptId,this.$refs["form"].validate((function(e){e&&(null===t.deptId||void 0===t.deptId?t.$message({message:"所属部门不能为空",type:"warning"}):(t.loading=!0,t.isAdd?t.doAdd():t.doEdit()))}))},doAdd:function(){var t=this;this.form.dId=this.form.dept.id,Object(o["a"])(this.form).then((function(e){t.resetForm(),t.$notify({title:"添加成功",type:"success",duration:2500}),t.loading=!1,t.$parent.init()})).catch((function(e){t.loading=!1,console.log(e.response.data.message)}))},doEdit:function(){var t=this;this.form.dId=this.form.dept.id,Object(o["c"])(this.form).then((function(e){t.resetForm(),t.$notify({title:"修改成功",type:"success",duration:2500}),t.loading=!1,t.$parent.init()})).catch((function(e){t.loading=!1,console.log(e.response.data.message)}))},resetForm:function(){this.dialog=!1,this.isRoleAdd=!1,this.$refs["form"].resetFields(),this.deptId=null,this.form={id:"",name:"",sort:999,createTime:"",dept:{id:""}}},getDepts:function(){var t=this;Object(a["d"])({enabled:!0}).then((function(e){t.depts=e.content}))}}}),d=c,u=(n("e2c4"),n("2877")),f=Object(u["a"])(d,i,r,!1,null,"f7089f6e",null);e["default"]=f.exports},"1fc2":function(t,e,n){},"2f21":function(t,e,n){"use strict";var i=n("79e5");t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},3749:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"head-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"输入岗位名称搜索"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toQuery(e)}},model:{value:t.query.value,callback:function(e){t.$set(t.query,"value",e)},expression:"query.value"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:t.toQuery}},[t._v("搜索")]),t._v(" "),n("div",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN","USERJOB_ALL","USERJOB_CREATE"],expression:"['ADMIN','USERJOB_ALL','USERJOB_CREATE']"}],staticStyle:{display:"inline-block",margin:"0px 2px"}},[n("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:t.add}},[t._v("新增")])],1)],1),t._v(" "),n("jobForm",{ref:"form",attrs:{"is-add":t.isAdd}}),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.data,size:"small"}},[n("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),n("el-table-column",{attrs:{label:"所属部门"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v(t._s(e.row.dept.name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"sort",label:"排序"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.sort)+"\n            ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"createTime",label:"创建日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.parseTime(e.row.createTime)))])]}}])}),t._v(" "),t.checkPermission(["ADMIN","USERJOB_ALL","USERJOB_EDIT","USERJOB_DELETE"])?n("el-table-column",{attrs:{label:"操作",width:"130px",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN","USERJOB_ALL","USERJOB_EDIT"],expression:"['ADMIN','USERJOB_ALL','USERJOB_EDIT']"}],attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(n){return t.edit(e.row)}}}),t._v(" "),n("el-popover",{directives:[{name:"permission",rawName:"v-permission",value:["ADMIN","USERJOB_ALL","USERJOB_DELETE"],expression:"['ADMIN','USERJOB_ALL','USERJOB_DELETE']"}],ref:e.row.id,attrs:{placement:"top",width:"180"}},[n("p",[t._v("确定删除本条数据吗？")]),t._v(" "),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){t.$refs[e.row.id].doClose()}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{loading:t.delLoading,type:"primary",size:"mini"},on:{click:function(n){return t.subDelete(e.row.id)}}},[t._v("确定")])],1),t._v(" "),n("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"mini"},slot:"reference"})],1)]}}],null,!1,3706002126)}):t._e()],1),t._v(" "),n("el-pagination",{staticStyle:{"margin-top":"8px"},attrs:{total:t.total,"current-page":t.page,layout:"total, prev, pager, next, sizes"},on:{"size-change":t.sizeChange,"current-change":t.pageChange}})],1)},r=[],a=(n("55dd"),n("7f7f"),n("e350")),o=n("d6f1"),s=n("76fe"),l=n("ed08"),c=n("1de3"),d={name:"Job",components:{jobForm:c["default"]},mixins:[o["a"]],data:function(){return{delLoading:!1}},created:function(){var t=this;this.$nextTick((function(){t.init()}))},methods:{parseTime:l["d"],checkPermission:a["a"],beforeInit:function(){this.url="api/job",this.params={page:this.page,size:this.size};var t=this.query,e=t.value;return e&&(this.params["name"]=e),!0},subDelete:function(t){var e=this;this.delLoading=!0,Object(s["b"])(t).then((function(n){e.delLoading=!1,e.$refs[t].doClose(),e.dleChangePage(),e.init(),e.$notify({title:"删除成功",type:"success",duration:2500})})).catch((function(n){e.delLoading=!1,e.$refs[t].doClose(),console.log(n.response.data.message)}))},add:function(){this.isAdd=!0,this.$refs.form.getDepts(),this.$refs.form.dialog=!0},edit:function(t){this.isAdd=!1;var e=this.$refs.form;e.getDepts(),e.form={id:t.id,name:t.name,sort:t.sort,createTime:t.createTime,dept:{id:t.dept.id}},e.deptId=t.dept.id,e.dialog=!0}}},u=d,f=n("2877"),p=Object(f["a"])(u,i,r,!1,null,"4da65415",null);e["default"]=p.exports},"55dd":function(t,e,n){"use strict";var i=n("5ca1"),r=n("d8e8"),a=n("4bf8"),o=n("79e5"),s=[].sort,l=[1,2,3];i(i.P+i.F*(o((function(){l.sort(void 0)}))||!o((function(){l.sort(null)}))||!n("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(a(this)):s.call(a(this),r(t))}})},"76fe":function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s}));var i=n("b775");function r(t){var e={deptId:t,page:0,size:9999};return Object(i["a"])({url:"api/job",method:"get",params:e})}function a(t){return Object(i["a"])({url:"api/job",method:"post",data:t})}function o(t){return Object(i["a"])({url:"api/job/"+t,method:"delete"})}function s(t){return Object(i["a"])({url:"api/job",method:"put",data:t})}},d6f1:function(t,e,n){"use strict";n("96cf");var i=n("3b8d"),r=n("b775");function a(t,e){return Object(r["a"])({url:t,method:"get",params:e})}e["a"]={data:function(){return{loading:!0,data:[],page:1,size:10,total:0,url:"",params:{},query:{},time:170,isAdd:!1}},methods:{init:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.beforeInit();case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:return t.abrupt("return",new Promise((function(t,n){e.loading=!0,a(e.url,e.params).then((function(n){e.total=parseInt(n.totalElements),e.data=n.content,setTimeout((function(){e.loading=!1}),e.time),t(n)})).catch((function(t){e.loading=!1,n(t)}))})));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),beforeInit:function(){return!0},pageChange:function(t){this.page=t,this.init()},sizeChange:function(t){this.page=1,this.size=t,this.init()},dleChangePage:function(t){void 0===t&&(t=1),this.data.length===t&&0!==this.page&&(this.page=this.page-1)},toQuery:function(){this.page=0,this.init()}}}},e2c4:function(t,e,n){"use strict";var i=n("1fc2"),r=n.n(i);r.a},e350:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("6762"),n("2fdb");var i=n("4360");function r(t){if(t&&t instanceof Array&&t.length>0){var e=i["a"].getters&&i["a"].getters.roles,n=t,r=e.some((function(t){return n.includes(t)}));return!!r}return!1}},fe05:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return s}));var i=n("b775");function r(t){return Object(i["a"])({url:"api/dept",method:"get",params:t})}function a(t){return Object(i["a"])({url:"api/dept",method:"post",data:t})}function o(t){return Object(i["a"])({url:"api/dept",method:"put",data:t})}function s(t){return Object(i["a"])({url:"api/dept/"+t,method:"delete"})}}}]);