(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c623354"],{"76fe":function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return i}));var r=n("b775");function o(e){var t={deptId:e,page:0,size:9999};return Object(r["a"])({url:"api/job",method:"get",params:t})}function a(e){return Object(r["a"])({url:"api/job",method:"post",data:e})}function l(e){return Object(r["a"])({url:"api/job/"+e,method:"delete"})}function i(e){return Object(r["a"])({url:"api/job",method:"put",data:e})}},"7b0a":function(e,t,n){"use strict";function r(e,t,n){""==t||void 0==t||null==t?n():t.length<5||t.length>32?n(new Error("请输入正确的账号格式")):n()}function o(e,t,n){var r=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/;""==t||void 0==t||null==t?n():r.test(t)?n():n(new Error("密码由在8到16位数字和字母组成"))}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},c24f:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return s}));var r=n("b775");function o(e){return Object(r["a"])({url:"api/users",method:"post",data:e})}function a(){return Object(r["a"])({url:"api/users/download",method:"get",responseType:"blob"})}function l(e){return Object(r["a"])({url:"api/users/"+e,method:"delete"})}function i(e){return Object(r["a"])({url:"api/users",method:"put",data:e})}function s(e){var t={oldPassword:e.oldPass,newPassword:e.newPass};return Object(r["a"])({url:"api/users/changePsd",method:"post",data:t})}},cc5e:function(e,t,n){"use strict";n.d(t,"g",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"f",(function(){return l})),n.d(t,"h",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return c}));var r=n("b775");function o(){return Object(r["a"])({url:"api/roles/all",method:"get"})}function a(e){return Object(r["a"])({url:"api/roles",method:"post",data:e})}function l(e){return Object(r["a"])({url:"api/roles/"+e,method:"get"})}function i(){return Object(r["a"])({url:"api/roles/level",method:"get"})}function s(e){return Object(r["a"])({url:"api/roles/"+e,method:"delete"})}function u(e){return Object(r["a"])({url:"api/roles",method:"put",data:e})}function d(e){return Object(r["a"])({url:"api/roles/permission",method:"put",data:e})}function c(e){return Object(r["a"])({url:"api/roles/menu",method:"put",data:e})}},ccbf:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{visible:e.dialog,"close-on-click-modal":!1,"before-close":e.cancel,title:e.isAdd?"新增用户":"编辑用户","append-to-body":"",width:"570px"},on:{"update:visible":function(t){e.dialog=t}}},[n("el-form",{ref:"form",attrs:{inline:!0,model:e.form,rules:e.rules,size:"small","label-width":"66px"}},[n("el-form-item",{attrs:{label:"账号",prop:"username"}},[n("el-input",{attrs:{disabled:!e.isAdd},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"姓名",prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"状态",prop:"enabled"}},e._l(e.enabledTypeOptions,(function(t){return n("el-radio",{key:t.id,attrs:{label:t.key},model:{value:e.form.enabled,callback:function(t){e.$set(e.form,"enabled",t)},expression:"form.enabled"}},[e._v(e._s(t.display_name))])})),1),e._v(" "),n("el-form-item",{attrs:{label:"电话",prop:"phone"}},[n("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",e._n(t))},expression:"form.phone"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"性别",prop:"enabled"}},e._l(e.sexOptions,(function(t){return n("el-radio",{key:t.id,attrs:{label:t.key},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v(e._s(t.display_name))])})),1),e._v(" "),n("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[n("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),n("el-form-item",{attrs:{required:"",label:"部门"}},[n("treeselect",{staticStyle:{width:"178px"},attrs:{options:e.depts,placeholder:"选择部门"},on:{select:e.selectFun},model:{value:e.deptId,callback:function(t){e.deptId=t},expression:"deptId"}})],1),e._v(" "),n("el-form-item",{attrs:{required:"",label:"岗位"}},[n("el-select",{staticStyle:{width:"178px"},attrs:{placeholder:"请先选择部门"},model:{value:e.jobId,callback:function(t){e.jobId=t},expression:"jobId"}},e._l(e.jobs,(function(e,t){return n("el-option",{key:e.name+t,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{required:"",label:"角色"}},[n("el-select",{staticStyle:{width:"450px"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.roleIds,callback:function(t){e.roleIds=t},expression:"roleIds"}},e._l(e.roles,(function(t,r){return n("el-option",{key:t.name+r,attrs:{disabled:1!==e.level&&t.level<=e.level,label:t.name,value:t.id}})})),1)],1),e._v(" "),n("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"地址"}},[n("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",rows:2,maxlength:"90","show-word-limit":"",placeholder:"请输入具体地址",clearable:""},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"text"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.doSubmit}},[e._v("确认")])],1)],1)},o=[],a=(n("ac6a"),n("c24f")),l=n("fe05"),i=n("cc5e"),s=n("7b0a"),u=n("76fe"),d=n("ca17"),c=n.n(d),f=(n("542c"),{components:{Treeselect:c.a},props:{isAdd:{type:Boolean,required:!0}},data:function(){var e=this,t=function(t,n,r){n?e.isvalidPhone(n)?r():r(new Error("请输入正确的11位手机号码")):r(new Error("请输入电话号码"))};return{dialog:!1,loading:!1,form:{name:"",username:"",email:"",sex:"0",enabled:!1,address:"",roles:[],job:{id:""},dept:{id:""},phone:null},roleIds:[],roles:[],depts:[],deptId:null,jobId:null,jobs:[],level:3,sexOptions:[{key:"0",display_name:"男"},{key:"1",display_name:"女"}],enabledTypeOptions:[{key:!0,display_name:"激活"},{key:!1,display_name:"锁定"}],rules:{username:[{required:!0,trigger:"blur",message:"用户名不能为空"},{validator:s["b"],trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:14,message:"长度在 2 到 14 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],phone:[{required:!0,trigger:"blur",validator:t}]}}},methods:{cancel:function(){this.resetForm()},doSubmit:function(){var e=this;this.form.dept.id=this.deptId,this.form.job.id=this.jobId,this.$refs["form"].validate((function(t){if(!t)return!1;if(null===e.deptId||void 0===e.deptId)e.$message({message:"部门不能为空",type:"warning"});else if(null===e.jobId)e.$message({message:"岗位不能为空",type:"warning"});else if(0===e.roleIds.length)e.$message({message:"角色不能为空",type:"warning"});else{e.loading=!0,e.form.roles=[];var n=e;e.roleIds.forEach((function(e,t){var r={id:e};n.form.roles.push(r)})),e.isAdd?e.doAdd():e.doEdit()}}))},doAdd:function(){var e=this;Object(a["a"])(this.form).then((function(t){e.resetForm(),e.$notify({title:"添加成功",message:"默认密码：abc123456",type:"success",duration:2500}),e.loading=!1,e.$parent.init()})).catch((function(t){e.loading=!1,console.log(t.response.data.message)}))},doEdit:function(){var e=this;Object(a["e"])(this.form).then((function(t){e.resetForm(),e.$notify({title:"修改成功",type:"success",duration:2500}),e.loading=!1,e.$parent.init()})).catch((function(t){e.loading=!1,console.log(t.response.data.message)}))},resetForm:function(){this.dialog=!1,this.$refs["form"].resetFields(),this.deptId=null,this.jobId=null,this.roleIds=[],this.form={username:"",email:"",sex:"0",enabled:!1,roles:[],job:{id:""},dept:{id:""},phone:null}},getRoles:function(){var e=this;Object(i["g"])().then((function(t){e.roles=t.content})).catch((function(e){console.log(e.response.data.message)}))},getJobs:function(e){var t=this;Object(u["d"])(e).then((function(e){t.jobs=e.content})).catch((function(e){console.log(e.response.data.message)}))},getDepts:function(){var e=this;Object(l["d"])().then((function(t){e.depts=t.content}))},isvalidPhone:function(e){var t=/^1[3|4|5|7|8][0-9]\d{8}$/;return t.test(e)},selectFun:function(e,t){this.getJobs(e.id)},getRoleLevel:function(){var e=this;Object(i["h"])().then((function(t){e.level=t.level})).catch((function(e){console.log(e.response.data.message)}))}}}),m=f,p=n("2877"),b=Object(p["a"])(m,r,o,!1,null,"f56f19da",null);t["default"]=b.exports},fe05:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return i}));var r=n("b775");function o(e){return Object(r["a"])({url:"api/dept",method:"get",params:e})}function a(e){return Object(r["a"])({url:"api/dept",method:"post",data:e})}function l(e){return Object(r["a"])({url:"api/dept",method:"put",data:e})}function i(e){return Object(r["a"])({url:"api/dept/"+e,method:"delete"})}}}]);